language: python
sudo: required

python:
  - "pypy"
  - "3.5"
  - "3.4"
  - "3.3"
  - "2.7"
  - "2.6"

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -y pypy-dev python-dev
  - wget https://raw.githubusercontent.com/gonzalo/gphoto2-updater/c17e39a99a603049239898dda3f3c9e247eb03a8/gphoto2-updater.sh
  - chmod +x gphoto2-updater.sh
  - echo 2 | sudo ./gphoto2-updater.sh
  - pip install -U pip
  - pip install codecov

install: pip install -r requirements/test.txt

script: nosetests --with-coverage --cover-package=shutter --cover-inclusive --cover-branches

after_success:
  - codecov
